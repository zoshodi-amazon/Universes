# Servers/Storage Architecture

direction: down

title: {
  label: Servers/Storage Module
  shape: text
  style.font-size: 20
}

# Global Duality
global: Global Duality {
  style.fill: "#e1f5fe"
  
  env: Env {
    aggregates: "Universe/Core/Options"
  }
  
  instances: Instances
  
  env -> instances: config
}

# Universe
universe: Universe {
  style.fill: "#fff3e0"
  
  core: Core {
    options: Options {
      backend: "local | s3 | postgres"
      local: "local.path"
      remote: "remote.url, remote.bucket"
    }
    bindings: Bindings
    options -> bindings
  }
}

# Backends
backends: Backends {
  style.fill: "#e8f5e9"
  
  sqlite: SQLite (local) {
    shape: cylinder
  }
  
  s3: S3/Minio {
    shape: cylinder
  }
  
  postgres: Postgres {
    shape: cylinder
  }
}

# Flow
universe.core.options -> backends: selects
